var harbors = require('./harbors');

exports.recursiveMkdir = function(dir){
    var _path = [];
    var index = 0;
    while(!harbors.fs.existsSync(dir)&&index<10){
        _path.push(harbors.path.basename(dir));
        dir = harbors.path.dirname(dir);
        index++;
    }
    while(_path.length>0&&index>0){
        dir = harbors.path.join(dir,_path.pop());
        harbors.fs.mkdirSync(dir);
        index--;
    }
};

exports.readDir = function(dir){
    if(harbors.fs.existsSync(dir))
        return harbors.fs.readdirSync(dir);
    else
        return [];
};

exports.readJson = function(file){
    if(exports.exists(file))
        return JSON.parse(harbors.fs.readFileSync(file)+'');
    else
        return undefined;
};