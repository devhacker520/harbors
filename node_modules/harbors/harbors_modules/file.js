var harbors = require('./harbors');

var fs = require("fs");
var path = require("path");

exports.recursiveMkdir = function(dir){
    var _path = [];
    var index = 0;
    while(!fs.existsSync(dir)&&index<10){
        _path.push(path.basename(dir));
        dir = path.dirname(dir);
        index++;
    }
    while(_path.length>0&&index>0){
        dir = path.join(dir,_path.pop());
        fs.mkdirSync(dir);
        index--;
    }
};

exports.readDir = function(dir){
    if(fs.existsSync(dir))
        return fs.readdirSync(dir);
    else
        return [];
};

exports.readJson = function(file){
    if(exports.exists(file))
        return JSON.parse(fs.readFileSync(file)+'');
    else
        return undefined;
};