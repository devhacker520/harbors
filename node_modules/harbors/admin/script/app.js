angular.module('HarborsAdmin', ['ngRoute'])

    .config(function($routeProvider, $locationProvider) {
        $routeProvider.when('/process', {
            templateUrl: '/process/index.html',
            controller: 'process_index'
        });
        $routeProvider.when('/config', {
            templateUrl: '/config/index.html',
            controller: 'config_index'
        });
        $routeProvider.when('/config/:configId', {
            templateUrl: '/Book/book.html',
            controller: 'BookCntl'
        });
        $routeProvider.when('/Book/:bookId/ch/:chapterId', {
            templateUrl: '/Book/chapter.html',
            controller: 'ChapterCntl'
        });

        // configure html5 to get links working on jsfiddle
        $locationProvider.html5Mode(true);
    });


function process_index($scope, $http){
    $http.get('/process/info.json').success(function(data){
        $scope.process = data;
    });

    $scope.closeProcess = function(id){
        $http.get('/process/close.json?id='+id).success(function(){
            window.location.href = "/process";
        });
    };

    $scope.openProcess = function(){
        $http.get('/process/open.json').success(function(){
            window.location.href = "/process";
        });
    };
}

function config_index($scope, $http){
    $http.get('/config/info.json').success(function(data){
        $scope.config = data;
    });

}
