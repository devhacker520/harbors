var fs = require('fs');
var util = require('util');

var move = function(path,callback){
    var $this = this;
    var is = fs.createReadStream($this.path);
    var os = fs.createWriteStream(path);

    util.pump(is, os, function() {
        $this.path = path;
        typeof(callback)=='function' && callback();
    });
    return $this;
};

var rename = function(){

};

exports.files = function(name){
    var $this = this;
    var fileObj = $this.req.files[name];
    if(fileObj){
        fileObj.move = move;
        fileObj.rename = rename;
        return fileObj;
    }else{
        return {move:function(){}};
    }

};

