var app = {
    init:function(req,res){
        this.req = req;
        this.res = res;
        return this;
    },
    Cookie:function(){
        if(!app.req.headers.cookie){
            return {};
        }
        var temp = app.req.headers.cookie.split(";");
        var cookie = {};
        for(var i=0;i<temp.length;i++){
            var temp_2 = temp[i].split("=");
            temp_2[0] = temp_2[0].replace(/^\s*/,'');
            cookie[temp_2[0]] = temp_2[1];
        }
        return cookie;
    },
    setCookie:function(cookie){
        var result = [];
        for(var p in cookie){
            result.push(p+"="+cookie[p]);
        }
        app.res.setHeader("Set-Cookie", result);
    },
    delCookie:function(cookie){
        var result = [];
        for(var p in cookie){
            result.push(p+"="+cookie[p]+";expires="+new Date()+";");
        }
        app.res.setHeader("Set-Cookie", result);
    }
};

module.exports = app;