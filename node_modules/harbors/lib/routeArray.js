var _display = require('./display');
var path = require('path');


//提取虚拟主机服务器内部route数组
exports.extraction = function(config){
    var route = [];

    console.log(harbors.config)

    if(config.serverType=='static'){
        route.push(function(route,num,req,res){
            _display(config.serverDir + '/' + req.url,req,res);
        });
        return route;
    }

    if(config.serverType=='dynamic'){
        config.session&&route.push(session);
        route.push(cookie);
        return route;
    }

};

//私有方法
function display(route,num,req,res){
    req.display = function(file){
        _display(file,req,res);
    };
    route[++num](route,num,req,res);
}

function session(route,num,req,res){
    route[++num](route,num,req,res);
}

function cookie(route,num,req,res){
    res.end('test');
}

function filter(route,num,req,res){

}

function html(){

}
