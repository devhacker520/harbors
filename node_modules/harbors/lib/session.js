var querystring = require('querystring');

module.exports = function(){
    var $this = this;
    var length = arguments.length;
    switch(length){
        case 0:
            return querystring.parse($this.req.headers.cookie);
            break;
        case 1:
            return querystring.parse($this.req.headers.cookie)[arguments[0]];
            break;
        default:
            var result = arguments[0]+'='+arguments[1]+';';
            if(typeof(arguments[2])=='object'){
                for(var p in arguments[2]){
                    result += p+'='+arguments[2][p]+';';
                }
            }
            //暂存在数组内，等待end执行的时候触发
            !$this.res.__cookie && ($this.res.__cookie=[]);
            $this.res.__cookie.push(result);
    }
};