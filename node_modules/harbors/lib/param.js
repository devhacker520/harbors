var _req,_res;
var path = require('path');
module.exports = {
    init:function(req,res){
        _req=req;_res=res;
        return this;
    },
    route:function(){
        var temp = _req.url.split("?");
        harbors.config.vhost ? (function(){
            //主机开启了vhost
            harbors.vhost[_req.vhost]['type']=='static'&&(function(){
                if(temp[0].slice(-1) === "/") {
                    temp[0] = temp[0] + harbors.config.sraticFile;
                }else if(!/\./.test(temp[0])) {
                    temp[0] = path.join(temp[0], "/", harbors.config.sraticFile);
                }
            })()
        })() : (function(){
            //关闭了vhost
            harbors.config.serverType=='static'&&(function(){
                if(temp[0].slice(-1) === "/") {
                    temp[0] = temp[0] + harbors.config.sraticFile;
                }else if(!/\./.test(temp[0])) {
                    temp[0] = path.join(temp[0], "/", harbors.config.sraticFile);
                }
            })()
        })();
        return temp[0].replace(/[\/\\]$/,'').split("/").splice(1);//[ 'news', 'index' ]
    },
    Get:function(){
        var temp = _req.url.split("?");
        if(temp[1]){
            var Get = {};
            var temp = temp[1].split("&");
            for(var i=0;i<temp.length;i++){
                var temp_2 = temp[i].split("=");
                Get[temp_2[0]] = temp_2[1];
            }
            return Get;
        }else{return {}}//{ asdfwe: 'asdf' }
    }
};