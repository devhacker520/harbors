var colors = require('colors');
/**
 * 开始测试
 * @param req
 * @param res
 * @param config
 */
exports.beginTest = function(req,res){
    res._testUrl = req.headers.host+req.url;
    res._testMethon = req.method;
    res._testStatus = 'Unknown';
    res._testTime = new Date();
};

/**
 * 结束测试
 * @param req
 * @param res
 * @param config
 */
exports.endTest = function (res){
    if(!res._testTime) return false;
    var time = (new Date()-0)-(res._testTime-0);
    var s = res._testStatus?(res._testStatus+' '):'';
    var m = res._testMethon?(colors['magenta'](res._testMethon)+' '):'';
    if(s==404||s==500){
        s = colors['red'](s);
    }else{
        s = colors['green'](s);
    }
    console.log(m+s+res._testUrl+' '+time+'ms');
};