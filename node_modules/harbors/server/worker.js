var http = require('http');
var _request_ = require('./request');

exports.createServer = function(config){
    if(typeof(config.server.listen)=='string'){
        config.server.listen = [config.server.listen];
    }
    for(var i=0;i<config.server.listen.length;i++){
        http.createServer(function(req,res){
            exports.request(req,res);
        }).listen(config.server.listen[i]);
        harbors.log('子进程开始监听端口：'+config.server.listen[i]);
    }
};

exports.request = function(req,res){
    harbors.log('收到客户端请求...');
    var r = _request_(req,res);
    r.notFound();
};