var cluster = require('cluster');
var _master_ = require('./master');
var _worker_ = require('./worker');

exports.main = function(){
    if(cluster.isMaster)
        exports.master();
    else
        exports.worker();
};

exports.master = function(){
    harbors.log('执行主进程任务队列...');
    _master_.clearSession(harbors.config);
    for(var i=0;i<harbors.config.server.process;i++){
        _master_.createWorker();
    }
};

exports.worker = function(){
    harbors.log('执行子进程任务队列...');
    _worker_.createServer(harbors.config);
};