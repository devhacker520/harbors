var harbors = require("../index");

harbors.Response = harbors.Class.extend({

    _headers: null,

    ctor: function(res){
        this.self = res;
        this._headers = {};
    },

    /**
     * This method signals to the server that all of the response headers and body have been sent
     * That server should consider this message complete.
     * The method, response.end(), MUST be called on each response.
     *
     * @param data
     * @param encoding
     */
    end: function(data, encoding){
        this.self.end(data, encoding);
    },

    write: function(chunk, encoding){
        this.self.write(chunk, encoding);
    },

    writeHead: function(statusCode, reasonPhrase, headers){
        this.self.writeHead(statusCode, reasonPhrase, headers);
    },

    writeHeader: function(statusCode, headers){
        this.self.writeHeader(statusCode, headers);
    },

    addTrailers: function(headers){
        this.self.addTrailers(headers);
    },

    removeHeader: function(name){
        this.self.removeHeader(name);
    },

    getHeader: function(name){
        this.self.getHeader(name);
    },

    setHeader: function(name, value){
        this.self.setHeader(name, value);
    },

    setTimeout: function(msecs, callback){
        this.self.getHeader(msecs, callback);
    },

    getSent: function(){
        return this.self.headersSent;
    }
});

harbors.Response.create = function(res){
    return new harbors.Response(res);
};