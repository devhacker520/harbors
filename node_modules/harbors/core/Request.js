var harbors = require('../index');

var url = require('url');

harbors.Request = {

    //_parseUrl: null,
    //_postParam: null,
    //_fileParam: null,

    getHeaders: function(name){
        return name ? this.headers[name] : this.headers;
    },

    getURL: function(){
        if(this._parseUrl === null)
            this._parseUrl = url.parse(this.url, true);

        return this._parseUrl.pathname;
    },

    getGetParam: function(){
        if(this._parseUrl === null)
            this._parseUrl = url.parse(this.url, true);
        return this._parseUrl.query;
    },

    getPostParam: function(name){
        return name ? this._postParam[name] : this._postParam;
    },

    getFiles: function(name){
        return name ? this._fileParam[name] : this._fileParam;
    }
};

harbors.Request.create = function(req){
    for(var p in harbors.Request){
        req[p] = harbors.Request[p];
    }
    return req;
};