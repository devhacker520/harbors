var harbors = require('../index');

var fs = require('fs');
var path = require('path');

var tools = {

    randomStr: function(length){
        length = length || 25;
        var interval = [
            {min: 48, length: 9.9},
            {min: 97, length: 25.9},
            {min: 65, length: 25.9}
        ];
        var string = '';
        for(var i = length; i > 0; i--){
            var _t = interval[Math.random() * 2.9 | 0];
            string += String.fromCharCode( (Math.random() * _t.length | 0) + _t.min );
        }
        return string;
    },

    mkDir: function(){
        //todo
    }
};

harbors.Session = harbors.Class.extend({

    //save path
    _path: null,
    //session num
    length: null,

    //init
    ctor: function(){

        //Default dirname path
        this._path = path.join(__dirname, '../tmp');
    },

    /**
     * Set a path for this session
     *
     * @param string
     */
    setPath: function(string){
        if(
            typeof string === 'string' && fs.existsSync(string) && fs.statSync(string).isDirectry()){
            this._path = string;
        }
    }
});

harbors.Session.create = function(){

    return new harbors.Session();
};